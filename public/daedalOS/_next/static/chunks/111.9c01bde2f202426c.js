"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{2435:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(14232),a=i(81855),n=i(91372),l=i(16361);let s=e=>{let{title:t}=(0,a.N)(),[i]=(0,r.useMemo)(()=>e.split(l.QB),[e]),{title:s}=n.A[i]||{};return{appendFileToTitle:(0,r.useCallback)((i,r)=>{let a=i?` - ${i}${r?` ${l.g6}`:""}`:"";t(e,`${s}${a}`)},[e,s,t]),prependFileToTitle:(0,r.useCallback)((i,r,a)=>{let n=i?`${r?`${l.g6} `:""}${i}${a?" ":" - "}`:"";t(e,`${n}${s}`)},[e,s,t])}}},20111:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var r=i(37876),a=i(79052),n=i(14232);let l=i(77232).Ay.div.withConfig({componentId:"sc-16d5cff3-0"})(["#vimjs-canvas{image-rendering:pixelated;}#vimjs-container{height:100%;width:100%;}#vimjs-file{display:none;}#vimjs-font-test{position:absolute;visibility:hidden;}"]);var s=i(68667),o=i(78011),u=i(2435),c=i(65231),f=i(81855),m=i(16361),d=i(60109),p=i(82909).Buffer;let w=({id:e})=>{let{closeWithTransition:t,processes:{[e]:i}}=(0,f.N)(),{readFile:w,updateFolder:h,writeFile:v}=(0,c.f)(),b=(0,s.A)(),{prependFileToTitle:g}=(0,u.A)(e),{libs:j=[],url:M=""}=i||{},[V,$]=(0,n.useState)([]),y=(0,n.useRef)(!1),A=(0,n.useCallback)(async()=>{let i=M||m.nB,[,...r]=i.split("/"),n="";1===r.length&&(n="/root"),window.VimWrapperModule={},await (0,d.aY)(j,!1,!!window.VimWrapperModule);let l=M?await w(i):p.from("");window.VimWrapperModule?.init?.({VIMJS_ALLOW_EXIT:!0,arguments:[`${n}${i}`],containerWindow:document.querySelector("#vimjs-container")?.closest("section"),memoryInitializerPrefixURL:"/Program Files/Vim.js/",postRun:[()=>{y.current=!1,b(window.VimWrapperModule?.VimModule?.FS,M?`Vim_${(0,a.basename)(M,(0,a.extname)(M))}`:e)}],preRun:[()=>{let e="";[n,...r].forEach((t,i,{[i+1]:a})=>{a&&i+1!==r.length?(window.VimWrapperModule?.VimModule?.FS_createPath?.(e,a,!0,!0),e+=`/${a}`):e?window.VimWrapperModule?.VimModule?.FS_createDataFile?.(e,t,l,!0,!0):e=t})}],print:console.info,printErr:console.info,quitCallback:()=>t(e),writeCallback:e=>$(t=>[...t,{buffer:p.from(e),url:i}])}),g((0,a.basename)(i))},[t,e,j,b,g,w,M]);return(0,n.useEffect)(()=>{V.length>0&&([...V].forEach(({buffer:e,url:t})=>{v(t,e,!0),h((0,a.dirname)(t),(0,a.basename)(t))}),$([]))},[h,V,v]),(0,n.useEffect)(()=>(y.current||(y.current=!0,A()),()=>{!y&&window.VimWrapperModule?.VimModule?.asmLibraryArg?._vimjs_prepare_exit()&&window.VimWrapperModule?.VimModule?.exit?.()}),[A]),(0,r.jsxs)(l,{children:[(0,r.jsx)("div",{id:"vimjs-container",...(0,o.A)({id:e}),children:(0,r.jsx)("canvas",{id:"vimjs-canvas",onContextMenuCapture:d.CH})}),(0,r.jsx)("div",{id:"vimjs-font-test"})]})}},68667:(e,t,i)=>{i.d(t,{A:()=>n});var r=i(14232),a=i(65231);let n=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:i}=(0,a.f)(),n=(0,r.useRef)("");return(0,r.useEffect)(()=>()=>{if(n.current){let e=n.current;n.current="",t(e,!0).then(()=>i("/",void 0,e)).catch(()=>{})}},[t,i]),(0,r.useCallback)(async(t,r)=>{if(!t)return;let a="";try{a=await e(t,r)}catch{}a&&(i("/",a),n.current=a)},[e,i])}},78011:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(79052),a=i(14232),n=i(49697),l=i(84966),s=i(54188),o=i(65231),u=i(81855),c=i(55295),f=i(16361),m=i(60109),d=i(29804);let p=({callback:e,directory:t=f.Bn,id:i,onDragLeave:p,onDragOver:w,updatePositions:h})=>{let{url:v}=(0,u.N)(),b=(0,d.w)(),{iconPositions:g,sortOrders:j,setIconPositions:M}=(0,c.w)(),{exists:V,mkdirRecursive:$,updateFolder:y,writeFile:A}=(0,o.f)(),C=(0,a.useCallback)(async(e,t,a)=>{if(i)if(t){let n=(0,r.join)(f.Bn,e);if(await $(f.Bn),await A(n,t,!0))return a===s.z.UPDATE_URL&&v(i,n),y(f.Bn,e),(0,r.basename)(n)}else a===s.z.UPDATE_URL&&v(i,e);return""},[i,$,y,v,A]),{openTransferDialog:_}=(0,n.A)();return{onDragLeave:p,onDragOver:(0,a.useCallback)(e=>{w?.(e),(0,m.CH)(e)},[w]),onDrop:(0,a.useCallback)(a=>{if(f.jj.has((0,m.uQ)(t)))return;if(a.target instanceof HTMLElement){if(a.target.closest(".focus-within")?.contains(a.target))return;if(h){let{files:e,text:i}=(0,l.bn)(a);if(0===e.length&&""===i)return;(async()=>{let n={x:a.clientX,y:a.clientY},l=[];if(i){try{l=JSON.parse(i)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,r.basename)(e)===(0,r.relative)(t,e))return;l=l.map(e=>(0,r.basename)(e))}else l=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);l=await (0,m.$I)(l,t,g,V),(0,m.$Y)(t,a.target,g,j,n,l,M,V)})()}}let n="string"==typeof i;n&&!h&&t===f.Bn&&b.current[i]?.componentWindow?.focus(f.VD),(0,l.nX)(a,e||C,t,_,n)},[e,t,V,g,i,_,b,M,j,h,C])}}}}]);