(()=>{var e={55994:(e,t,r)=>{"use strict";let a,i,o;var s=r(7567);r(14232);let n=async e=>{try{if("function"==typeof e.availability)return await e.availability()==="available";if("function"==typeof e.capabilities)return"readily"===(await e.capabilities()).available}catch{}return!1},l=["/Program Files/Marked/marked.min.js","/Program Files/Marked/purify.min.js"],c={balanced:{temperature:.6,topK:3},creative:{temperature:.7,topK:5},precise:{temperature:.5,topK:2}},u={context_window_size:131072,frequency_penalty:0,presence_penalty:0,top_p:.9},f={content:"You are a helpful AI assistant.",role:"system"},p=new AbortController,m=!1,d=!1,h=0,b=[],g=!1;globalThis.addEventListener("message",async({data:e})=>{if(e&&"init"!==e){if("cancel"===e)d&&(m=!0,p.abort());else if(e.id&&e.text&&e.style){if(d=!0,h!==e.id){if(h=e.id,e.hasWindowAI){b=[],i?.destroy(),a?.destroy();let t={...c[e.style],signal:p.signal,systemPrompt:f.content};a=await globalThis.ai.languageModel.create(t)}else if(b=[],!o){let{CreateMLCEngine:e}=await r.e(3290,"high").then(r.bind(r,79665));m||(o=await e("DeepSeek-R1-Distill-Llama-8B-q4f32_1-MLC",{initProgressCallback:e=>globalThis.postMessage({progress:e})}))}}let t="",y=0,v=async r=>{a?.destroy(),b.push({content:e.text,role:"user",streamId:0},{content:r||t,role:"assistant",streamId:0});let i={...c[e.style],initialPrompts:[f,...b]};a=await globalThis.ai.languageModel.create(i)};try{if(e.hasWindowAI&&e.summarizeText&&"summarizer"in globalThis.ai&&await n(globalThis.ai.summarizer)&&(i=await globalThis.ai.summarizer.create()),e.imagePrompt&&e.offscreenCanvas){globalThis.tvmjsGlobalEnv=globalThis.tvmjsGlobalEnv||{},globalThis.tvmjsGlobalEnv.logger=(e,t)=>globalThis.postMessage({progress:{text:t}});try{globalThis.importScripts(...s.libs)}catch{}await (0,s.runStableDiffusion)({prompts:[[e.imagePrompt,""]]},e.offscreenCanvas,!0,!1),globalThis.tvmjsGlobalEnv.logger("",""),e.hasWindowAI&&v("I'll try to create that using Stable Diffusion 1.5.")}else for(;y++<3&&!t&&!m;)try{if(e.hasWindowAI){let r=a,o={signal:p.signal};i&&e.summarizeText?(t=await i.summarize(e.summarizeText,o),v()):r&&(t=e.streamId?r.promptStreaming(e.text,o):await r.prompt(e.text,o)||"")}else{b.push({content:e.summarizeText?`Summarize:

${e.summarizeText}`:e.text,role:"user",streamId:e.streamId});let r=!!e.streamId,a=await o.chat.completions.create({logprobs:!0,messages:b,stream:r,stream_options:{include_usage:!1},temperature:c[e.style].temperature,top_logprobs:c[e.style].topK,...u});t=r?a:a.choices[0].message.content||""}}catch(e){}}catch(e){}if(!m){if(t){g||(globalThis.importScripts(...l),g=!0);let r=(t,r)=>{if(globalThis.postMessage({formattedResponse:globalThis.marked.parse(t,{headerIds:!1,mangle:!1}),response:t,streamId:r}),b[b.length-1]?.role!=="user"){let t=b.find(e=>"user"===e.role&&e.streamId===r);t?t.content=e.text:b.push({content:e.text,role:"user",streamId:r})}let a=b.find(e=>"assistant"===e.role&&e.streamId===r);a?a.content=t:b.push({content:t,role:"assistant",streamId:r})};if("string"==typeof t)r(t);else try{let a="";for await(let i of t){if(m)break;a+="string"==typeof i?i:i.choices[0]?.delta.content||"",r(a,e.streamId)}}catch(e){}}e.streamId&&globalThis.postMessage({complete:!0,streamId:e.streamId})}d=!1,m&&(m=!1,globalThis.postMessage("canceled"))}}},{passive:!0})},99742:e=>{var t,r,a,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}function n(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var l=[],c=!1,u=-1;function f(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&p())}function p(){if(!c){var e=n(f);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||c||n(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}},s=!0;try{e[a](o,o.exports,r),s=!1}finally{s&&delete t[a]}return o.exports}r.m=e,r.x=()=>{var e=r.O(void 0,[6593,2909,7567],()=>r(55994));return r.O(e)},(()=>{var e=[];r.O=(t,a,i,o)=>{if(a){o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[a,i,o];return}for(var n=1/0,s=0;s<e.length;s++){for(var[a,i,o]=e[s],l=!0,c=0;c<a.length;c++)(!1&o||n>=o)&&Object.keys(r.O).every(e=>r.O[e](a[c]))?a.splice(c--,1):(l=!1,o<n&&(n=o));if(l){e.splice(s--,1);var u=i();void 0!==u&&(t=u)}}return t}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,i){if(1&i&&(a=this(a)),8&i||"object"==typeof a&&a&&(4&i&&a.__esModule||16&i&&"function"==typeof a.then))return a;var o=Object.create(null);r.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var n=2&i&&a;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach(e=>s[e]=()=>a[e]);return s.default=()=>a,r.d(o,s),o}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=(e,t)=>Promise.all(Object.keys(r.f).reduce((a,i)=>(r.f[i](e,a,t),a),[])),r.u=e=>6593===e?"static/chunks/framework-1311cbef2157db78.js":"static/chunks/"+(({2962:"Resize Image Worker",3290:"e061755b"})[e]||e)+"."+({1071:"e55331dbb69d578a",1894:"ce3cfee751872641",2909:"e5f9a13d80fe273f",2962:"5686429b281dc561",3148:"c88d12f5cd85f063",3290:"928afc6056cf0097",7109:"85e59deb7c28e5d0",7567:"32cd1b11ec588a78",7596:"cb952ec11451dda3",9742:"d43a2a6d9faca159"})[e]+".js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=61,(()=>{var e;r.tt=()=>(void 0===e&&(e={createScriptURL:e=>e},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("nextjs#bundler",e))),e)})(),r.tu=e=>r.tt().createScriptURL(e),r.p="/_next/",(()=>{r.b=self.location+"/../../../";var e={61:1,9742:1};r.f.i=(t,a)=>{e[t]||importScripts(r.tu(r.p+r.u(t)))};var t=self.webpackChunk_N_E=self.webpackChunk_N_E||[],a=t.push.bind(t);t.push=t=>{var[i,o,s]=t;for(var n in o)r.o(o,n)&&(r.m[n]=o[n]);for(s&&s(r);i.length;)e[i.pop()]=1;a(t)}})(),(()=>{var e=r.x;r.x=()=>Promise.all([6593,2909,7567].map(r.e,r)).then(e)})(),_N_E=r.x()})();