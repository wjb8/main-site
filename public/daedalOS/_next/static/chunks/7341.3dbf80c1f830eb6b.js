"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876,7341],{2435:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(14232),r=n(81855),i=n(91372),o=n(16361);let l=e=>{let{title:t}=(0,r.N)(),[n]=(0,a.useMemo)(()=>e.split(o.QB),[e]),{title:l}=i.A[n]||{};return{appendFileToTitle:(0,a.useCallback)((n,a)=>{let r=n?` - ${n}${a?` ${o.g6}`:""}`:"";t(e,`${l}${r}`)},[e,l,t]),prependFileToTitle:(0,a.useCallback)((n,a,r)=>{let i=n?`${a?`${o.g6} `:""}${n}${r?" ":" - "}`:"";t(e,`${i}${l}`)},[e,l,t])}}},26451:(e,t,n)=>{n.d(t,{p:()=>l});var a=n(79052),r=n(14232),i=n(65231),o=n(16361);let l=()=>{let{createPath:e,updateFolder:t}=(0,i.f)();return{createSnapshot:(0,r.useCallback)(async(n,r,i,l=!0,s=o.Sb)=>{let c="";try{if((c=await e(n,s,r,void 0,l))&&i)try{let t="function"==typeof i?await i():i;t&&await e(`${(0,a.join)(s,c)}${o.V9}`,o.jv,t,void 0,l)}catch{}t((0,a.dirname)(s)),t(s,c)}catch{}return c},[e,t])}}},30876:(e,t,n)=>{n.d(t,{addEntryToZippable:()=>s,addFileToZip:()=>u,createZippable:()=>l,isFileInZip:()=>f,unarchive:()=>m,unzip:()=>c,zipAsync:()=>d});var a=n(79052),r=n(60109),i=n(16361),o=n(82909).Buffer;let l=(e,t)=>e.split("/").reduceRight((e,t)=>({[t]:e}),[t,i.X8]),s=(e,t)=>{let[[n,a]]=Object.entries(t);return e[n]=n in e?s(e[n],t[n]):a,e},c=e=>new Promise((t,a)=>{n.e(1071,"high").then(n.bind(n,21071)).then(({unzip:n})=>n(e,(e,n)=>e?a(e):t(n)))}),d=(e,t=i.X8)=>new Promise((a,r)=>{n.e(1071,"high").then(n.bind(n,21071)).then(({zip:n})=>n(e,t,(e,t)=>e?r(e):a(t)))}),u=async(e,t,n,a)=>o.from(await d(s(e.length>0&&await c(e)||{},l(n,await a(t))))),f=(e,t)=>new Promise((a,r)=>{n.e(1071,"high").then(n.bind(n,21071)).then(({unzip:n})=>n(e,(e,n)=>e?r(e):a(Object.keys(n).includes(t))))}),m=async(e,t)=>{if(window.SevenZip||await (0,r.aY)(["System/7zip/7zz.es6.js"]),!window.SevenZip)return{};let n=await window.SevenZip(),i=(0,a.basename)(e),l=(0,a.join)("/",(0,a.basename)(e,(0,a.extname)(e)));n.FS.mkdir(l),n.FS.chdir(l);let s=n.FS.open(i,"w+");n.FS.write(s,t,0,t.length),n.FS.close(s),n.callMain(["-y","x",i]);let c=n.FS.readdir(l),d=e=>(t,r)=>{if([".","..",i].includes(r))return t;let s=(0,a.join)(e,r),c=s.replace(l,"");try{n.FS.chmod(s,511)}catch{}return Object.assign(t,n.FS.isDir(n.FS.stat(s).mode)?{[(0,a.join)(c,"/")]:o.from(""),...n.FS.readdir(s).reduce(d(s),{})}:{[c]:n.FS.readFile(s,{flags:"r"})}),t};return c.reduce(d(l),{})}},35144:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(37876),r=n(14232),i=n(77232),o=n(43010),l=n(78011),s=n(81855);let c=i.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),d=(0,r.memo)(({id:e,useHook:t,StyledComponent:n,children:i})=>{let{processes:{[e]:{url:d=""}={}}}=(0,s.N)(),u=(0,r.useRef)(null),[f,m]=(0,r.useState)(!0),p=(0,r.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:u,id:e,loading:f,setLoading:m,url:d}),(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsx)(o.A,{}),(0,a.jsx)(n||c,{ref:u,style:p,...(0,l.A)({id:e}),children:i})]})})},37341:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(37876),r=n(77232),i=n(79572);let o=r.Ay.div.withConfig({componentId:"sc-4f9faf66-0"})(["&.drop{",";}"],(0,i.A)("Drop rom file here","#f1f1f1"));var l=n(79052),s=n(14232),c=n(99818),d=n(68667),u=n(2435),f=n(65231),m=n(81855),p=n(16361),h=n(60109),y=n(30876),b=n(26451),v=n(84906),w=n(82909).Buffer;let S=e=>Object.entries(c.W).find(([,{ext:t}])=>t.includes(e))||[],g=(e,t)=>("Function"in t&&(e.constructor=t.Function),e),E=({containerRef:e,id:t,loading:n,setLoading:a,url:r})=>{let{exists:i,readFile:o}=(0,f.f)(),{createSnapshot:c}=(0,b.p)(),E=(0,d.A)(),{linkElement:A,processes:{[t]:{closing:F,libs:k=[]}={}}={}}=(0,m.N)(),{prependFileToTitle:C}=(0,u.A)(t),_=(0,s.useRef)(void 0),$=(0,v.A)(t,e),j=(0,s.useRef)(void 0),J=(0,s.useCallback)(async n=>{let r=$?.();if(!r)return;j.current=n,a(!0),e.current?.classList.remove("drop");try{r.EJS_terminate?.()}catch{}[...r.document.body.children].forEach(e=>e.remove());let s=r.document.createElement("div");s.id="emulator",s.style.placeContent="center",r.document.body.append(s),r.EJS_gameName=(0,l.basename)(n,(0,l.extname)(n));let[d,{core:u="",zip:f=!1}={}]=S((0,h.uQ)(n)),m=await o(n);r.EJS_gameUrl=(0,h.Zd)(f?w.from(await (0,y.zipAsync)({[(0,l.basename)(n)]:m})):m),r.EJS_core=u;let b=`${(0,l.basename)(n)}.sav`,v=(0,l.join)(p.Sb,b);r.EJS_onGameStart=g(({detail:{emulator:e}})=>{(async()=>{await i(v)&&e.loadState?.(await o(v)),a(!1),E(r.FS,`EmulatorJs_${r.EJS_gameName}`),_.current=e;let n=e.elements?.container?.querySelector("canvas");n&&A(t,"peekElement",n)})()},r),r.EJS_onSaveState=g(({screenshot:e,state:t})=>{r.EJS_terminate?.(),t&&c(b,w.from(t),w.from(e))},r),r.EJS_player="#emulator",r.EJS_biosUrl="",r.EJS_pathtodata="Program Files/EmulatorJs/",r.EJS_startOnLoaded=!0,r.EJS_RESET_VARS=!0,r.EJS_Buttons={cacheManage:!1,loadState:!1,quickLoad:!1,quickSave:!1,saveState:!1,screenRecord:!1,screenshot:!1},await (0,h.aY)(k,void 0,void 0,void 0,r),C(`${r.EJS_gameName} (${d})`)},[e,c,i,$,t,k,A,E,C,o,a]);(0,s.useEffect)(()=>{r?r!==j.current&&J(r):F||(a(!1),e.current?.classList.add("drop"))},[F,e,J,a,r]),(0,s.useEffect)(()=>()=>{!n&&F&&_.current?.elements.buttons.saveState?.click()},[F,n])};var A=n(35144);let F=({id:e})=>(0,a.jsx)(A.A,{StyledComponent:o,id:e,useHook:E})},43010:(e,t,n)=>{n.d(t,{A:()=>a});let a=n(77232).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},68667:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(14232),r=n(65231);let i=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.f)(),i=(0,a.useRef)("");return(0,a.useEffect)(()=>()=>{if(i.current){let e=i.current;i.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let r="";try{r=await e(t,a)}catch{}r&&(n("/",r),i.current=r)},[e,n])}},78011:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(79052),r=n(14232),i=n(49697),o=n(84966),l=n(54188),s=n(65231),c=n(81855),d=n(55295),u=n(16361),f=n(60109),m=n(29804);let p=({callback:e,directory:t=u.Bn,id:n,onDragLeave:p,onDragOver:h,updatePositions:y})=>{let{url:b}=(0,c.N)(),v=(0,m.w)(),{iconPositions:w,sortOrders:S,setIconPositions:g}=(0,d.w)(),{exists:E,mkdirRecursive:A,updateFolder:F,writeFile:k}=(0,s.f)(),C=(0,r.useCallback)(async(e,t,r)=>{if(n)if(t){let i=(0,a.join)(u.Bn,e);if(await A(u.Bn),await k(i,t,!0))return r===l.z.UPDATE_URL&&b(n,i),F(u.Bn,e),(0,a.basename)(i)}else r===l.z.UPDATE_URL&&b(n,e);return""},[n,A,F,b,k]),{openTransferDialog:_}=(0,i.A)();return{onDragLeave:p,onDragOver:(0,r.useCallback)(e=>{h?.(e),(0,f.CH)(e)},[h]),onDrop:(0,r.useCallback)(r=>{if(u.jj.has((0,f.uQ)(t)))return;if(r.target instanceof HTMLElement){if(r.target.closest(".focus-within")?.contains(r.target))return;if(y){let{files:e,text:n}=(0,o.bn)(r);if(0===e.length&&""===n)return;(async()=>{let i={x:r.clientX,y:r.clientY},o=[];if(n){try{o=JSON.parse(n)}catch{}if(!Array.isArray(o))return;let[e]=o;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;o=o.map(e=>(0,a.basename)(e))}else o=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);o=await (0,f.$I)(o,t,w,E),(0,f.$Y)(t,r.target,w,S,i,o,g,E)})()}}let i="string"==typeof n;i&&!y&&t===u.Bn&&v.current[n]?.componentWindow?.focus(u.VD),(0,o.nX)(r,e||C,t,_,i)},[e,t,E,w,n,_,v,g,S,y,C])}}},79572:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(77232);let r=(e,t)=>(0,a.AH)(["&::before{color:",';content:"','";display:flex;font-size:16px;font-weight:600;height:100%;left:0;place-content:center;place-items:center;position:absolute;top:0;width:100%;}'],t,e)},84906:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(14232),r=n(78011),i=n(16361),o=n(81855),l=n(55295);let s=e=>{let t=e.HTMLCanvasElement.prototype.getContext;e.HTMLCanvasElement.prototype.getContext=function(e,n){return("webgl"===e||"webgl2"===e)&&(n=Object.assign(n||{},{preserveDrawingBuffer:!0})),t.call(this,e,n)}},c=e=>{let t=e.createElement("canvas");return t.id="canvas",t.style.width="100%",t.style.height="100%",t.tabIndex=-1,e.body.append(t),t},d=(e,t,n)=>{let a=document.createElement("iframe");a.title=e,a.style.backgroundColor="transparent",a.style.border="0",a.style.width="100%",a.style.height="100%",t.append(a);let r=a.contentDocument;r.open(),r.write(`
    <!DOCTYPE html>
    ${n?`<head><style>${n}</style></head>`:"<head />"}
    <body />
    `),r.close();let i=a.contentWindow;return i.document.documentElement.style.height="100%",i.document.documentElement.style.width="100%",i.document.body.style.height="100%",i.document.body.style.width="100%",i.document.body.style.margin="0",i.document.body.style.overflow="hidden",a},u=(e,t,n,u,f=!1)=>{let[m,p]=(0,a.useState)(),[h,y]=(0,a.useState)(),{onDragOver:b,onDrop:v}=(0,r.A)({id:e}),{processes:{[e]:{maximized:w}={}}={}}=(0,o.N)(),{foregroundId:S,setForegroundId:g}=(0,l.w)(),E=(0,a.useCallback)(()=>{let t;if(!m)return;m.querySelector("iframe")?.remove();let n=d(e,m,u),a=n.contentWindow;s(a),f&&(t=c(n.contentDocument));let r=()=>{f&&t?t.focus(i.VD):a.focus(),g(e)};return a.addEventListener("click",r),a.addEventListener("focus",r),a.addEventListener("blur",()=>g("")),a.addEventListener("dragover",b),a.addEventListener("drop",v),y(a),a},[m,e,b,v,g,u,f]);return(0,a.useLayoutEffect)(()=>{h&&S===e&&requestAnimationFrame(()=>{n?n(h):f?h.document.querySelector("canvas")?.focus(i.VD):h.focus()})},[h,n,S,e,w,f]),(0,a.useEffect)(()=>{if(!m){let e=()=>{requestAnimationFrame(()=>{t.current?p(t.current):e()})};e()}},[m,t]),(0,a.useMemo)(()=>m?E:void 0,[m,E])}}}]);