"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9523],{99523:(e,t,n)=>{let r,o;n.r(t),n.d(t,{deleteDB:()=>p,openDB:()=>f,unwrap:()=>l,wrap:()=>d});let s=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,a=new WeakMap,c=new WeakMap,u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(d(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",s)});return c.set(t,e),t}if(a.has(e))return a.get(e);let t=function(e){if("function"==typeof e)return(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(l(this),t),d(this.request)}:function(...t){return d(e.apply(l(this),t))};return(e instanceof IDBTransaction&&function(e){if(i.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});i.set(e,t)}(e),s(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,u):e}(e);return t!==e&&(a.set(e,t),c.set(t,e)),t}let l=e=>c.get(e);function f(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){let i=indexedDB.open(e,t),a=d(i);return r&&i.addEventListener("upgradeneeded",e=>{r(d(i.result),e.oldVersion,e.newVersion,d(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function p(e,{blocked:t}={}){let n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),d(n).then(()=>void 0)}let D=["get","getKey","getAll","getAllKeys","count"],I=["put","add","delete","clear"],v=new Map;function B(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(v.get(t))return v.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=I.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||D.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,o?"readwrite":"readonly"),i=s.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),o&&s.done]))[0]};return v.set(t,s),s}u=(e=>({...e,get:(t,n,r)=>B(t,n)||e.get(t,n,r),has:(t,n)=>!!B(t,n)||e.has(t,n)}))(u);let h=["continue","continuePrimaryKey","advance"],w={},y=new WeakMap,g=new WeakMap,E={get(e,t){if(!h.includes(t))return e[t];let n=w[t];return n||(n=w[t]=function(...e){y.set(this,g.get(this)[t](...e))}),n}};async function*b(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,E);for(g.set(n,t),c.set(n,l(t));t;)yield n,t=await (y.get(n)||t.continue()),y.delete(n)}function m(e,t){return t===Symbol.asyncIterator&&s(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&s(e,[IDBIndex,IDBObjectStore])}u=(e=>({...e,get:(t,n,r)=>m(t,n)?b:e.get(t,n,r),has:(t,n)=>m(t,n)||e.has(t,n)}))(u)}}]);