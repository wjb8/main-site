globalThis.addEventListener("message",async({data:{blob:e,canvas:t,maxDimension:a}})=>{if(e instanceof Blob&&t instanceof OffscreenCanvas){let i=t.getContext("2d");if(!i)return;let n=await createImageBitmap(e);if(!n)return;let s=Math.min(a/n.width,a/n.height),h=Math.round(n.width*s),g=Math.round(n.height*s);t.width=h,t.height=g,i.drawImage(n,0,0,h,g),globalThis.postMessage(await t.convertToBlob({type:"image/png"}))}},{passive:!0}),_N_E={};