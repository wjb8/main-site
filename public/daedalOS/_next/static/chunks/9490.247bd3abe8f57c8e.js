"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9490],{2435:(e,t,i)=>{i.d(t,{A:()=>o});var a=i(14232),r=i(81855),n=i(91372),s=i(16361);let o=e=>{let{title:t}=(0,r.N)(),[i]=(0,a.useMemo)(()=>e.split(s.QB),[e]),{title:o}=n.A[i]||{};return{appendFileToTitle:(0,a.useCallback)((i,a)=>{let r=i?` - ${i}${a?` ${s.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,a.useCallback)((i,a,r)=>{let n=i?`${a?`${s.g6} `:""}${i}${r?" ":" - "}`:"";t(e,`${n}${o}`)},[e,o,t])}}},26451:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(79052),r=i(14232),n=i(65231),s=i(16361);let o=()=>{let{createPath:e,updateFolder:t}=(0,n.f)();return{createSnapshot:(0,r.useCallback)(async(i,r,n,o=!0,l=s.Sb)=>{let d="";try{if((d=await e(i,l,r,void 0,o))&&n)try{let t="function"==typeof n?await n():n;t&&await e(`${(0,a.join)(l,d)}${s.V9}`,s.jv,t,void 0,o)}catch{}t((0,a.dirname)(l)),t(l,d)}catch{}return d},[e,t])}}},34901:(e,t,i)=>{i.d(t,{Ay:()=>o,EX:()=>r,Ho:()=>a,WB:()=>n,lH:()=>s});let a={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},n=30,s=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${n}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},35144:(e,t,i)=>{i.d(t,{A:()=>c});var a=i(37876),r=i(14232),n=i(77232),s=i(43010),o=i(78011),l=i(81855);let d=n.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),c=(0,r.memo)(({id:e,useHook:t,StyledComponent:i,children:n})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.N)(),u=(0,r.useRef)(null),[h,w]=(0,r.useState)(!0),f=(0,r.useMemo)(()=>({contain:"strict",visibility:h?"hidden":"visible"}),[h]);return t({containerRef:u,id:e,loading:h,setLoading:w,url:c}),(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsx)(s.A,{}),(0,a.jsx)(i||d,{ref:u,style:f,...(0,o.A)({id:e}),children:n})]})})},43010:(e,t,i)=>{i.d(t,{A:()=>a});let a=i(77232).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},49490:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var a=i(37876);let r=i(77232).Ay.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var n=i(79052),s=i(14232);let o={emulatorFunction:"dosWorker"},l=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],d=".zip.save",c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},u=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var h=i(2435),w=i(65231),f=i(81855),p=i(16361),m=i(60109),b=i(54820),g=i(26451),y=i(82909).Buffer;let x=async(e,t)=>{let{addFileToZip:a,isFileInZip:r}=await i.e(876,"high").then(i.bind(i,30876));return Object.entries(c).reduce(async(e,[i,n])=>{let s=await e;return s.length>0&&await r(s,i)?s:a(s,n,i,t)},Promise.resolve(e))},v=(e,t,a,r)=>{let{appendFileToTitle:o}=(0,h.A)(e),{exists:c,readFile:u}=(0,w.f)(),{argument:v,linkElement:k,processes:{[e]:E}}=(0,f.N)(),{closing:j}=E||{},[C,A]=(0,s.useState)({}),{createSnapshot:$}=(0,g.p)(),F=(0,s.useCallback)(async(e,t,i=!1)=>{if(C[e]&&await $(`${(0,n.basename)(e)}${d}`,y.from(await C[e].persist()||[]),t),i)try{await r?.stop(),await C[e]?.exit()}catch{}},[$,C,r]),S=(0,s.useCallback)(async e=>{let t=await C[e]?.screenshot();return t?(0,m.Jf)(t):void 0},[C]),T=(0,s.useCallback)(async()=>{let s,[h]=Object.keys(C);"string"==typeof h&&(await F(h,await S(h)),A({[t]:void 0}));let w=t?await u(t):y.from(""),f=(0,m.uQ)(t),{zipAsync:g}=await i.e(876,"high").then(i.bind(i,30876)),E=async e=>y.from(await g({[(0,n.basename)(t)]:e})),j=async e=>(0,m.Zd)(await x(e,u)),$=".exe"===f?await E(w):w;if(".jsdos"===f)s=(0,m.Zd)($);else try{s=await j($)}catch{s=await j(await E(w))}let T=(0,n.join)(p.Sb,`${(0,n.basename)(t)}${d}`),G=await c(T)?(0,m.Zd)(await u(T)):void 0,B=await r?.run(s,G);if(B){let i=a.current?.querySelector("canvas");i instanceof HTMLCanvasElement&&(k(e,"peekElement",i),A({[t]:B}),o((0,n.basename)(t)),v(e,"mute",()=>{B.mute(),v(e,"muted",!0)}),v(e,"unmute",()=>{B.unmute(),v(e,"muted",!1)}),(0,m.E)(s),G&&(0,m.E)(G),(0,b.v)(l))}},[o,v,F,a,C,r,c,e,k,u,S,t]);return(0,s.useEffect)(()=>(!E||j||!r||t in C||T(),()=>{if(j)if(t){let e=e=>{window.setTimeout(()=>F(t,e,j),p.UW.WINDOW)};S(t).then(e).catch(e)}else r?.stop()}),[F,j,C,r,T,E,S,t]),C[t]};var k=i(68667),E=i(67718),j=i(55295);let C=e=>{u.has(e.key)&&e.preventDefault()},A=({containerRef:e,id:t,loading:i,setLoading:a,url:r})=>{let{updateWindowSize:l}=(0,E.A)(t),[d,c]=(0,s.useState)(),u=(0,k.A)(),h=(0,s.useRef)(!1),{foregroundId:w}=(0,j.w)(),b=v(t,r,e,d),{closeWithTransition:g,processes:{[t]:{libs:y=[]}={}}={}}=(0,f.N)();(0,s.useEffect)(()=>{d||h.current||(h.current=!0,(0,m.aY)(y).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",C,{capture:!0}),t?.addEventListener("keyup",C,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(p.VD),{passive:!0}),c(window.Dos(e.current,o))}}))},[e,d,y]),(0,s.useEffect)(()=>{if(b&&i){l(b.height(),b.width());let i=b.events();i.onMessage((e,i)=>{if(i.startsWith("[LOG_EXEC]")){let[,e]=i.split("[LOG_EXEC]"),[a]=e.replace("Parsing command line: ","").split(" ");"EXIT"===a.toUpperCase()&&g(t)}}),i.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[i,a]=[(0,m.kl)(t?.style.width),(0,m.kl)(t?.style.height)],{height:r=0,width:n=0}=t?.getBoundingClientRect()||{};a&&i&&(a!==r||i!==n)&&l(a,i)}),i.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),a(!1),u(window.JSDOS_FS,r?`JSDOS_${(0,n.basename)(r,(0,n.extname)(r))}`:t)}},[g,e,b,t,i,u,a,l,r]),(0,s.useLayoutEffect)(()=>{t!==w||i||e.current?.focus(p.VD)},[e,i,w,t])};var $=i(35144);let F=({id:e})=>(0,a.jsx)($.A,{StyledComponent:r,id:e,useHook:A})},54820:(e,t,i)=>{i.d(t,{$:()=>s,v:()=>n});let a="DEFAULT",r="__setter__",n=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),s=(e,t,i)=>{if(setTimeout(()=>{window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][r]=a)},i),window.sharedGlobals=window.sharedGlobals||{},e in window.sharedGlobals)window.sharedGlobals[e][r]=t;else{let i=window[e];window.sharedGlobals[e]={[a]:i,[r]:t},Object.defineProperty(window,e,{get(){if(window.sharedGlobals&&e in window.sharedGlobals){let{stack:t=""}=Error(),i=Object.keys(window.sharedGlobals[e]).filter(e=>![a,r].includes(e)).find(e=>new RegExp(e).test(t));return window.sharedGlobals[e][i||a]}return i},set(t){window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][window.sharedGlobals[e][r]]=t)}})}}},67718:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(77232),r=i(14232),n=i(74789),s=i(81855),o=i(55295);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:i=!1,maximized:l=!1}={}}={}}=(0,s.N)(),{sizes:{titleBar:d}}=(0,a.DP)();return{updateWindowSize:(0,r.useCallback)((a,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,n.WZ)({height:a+d.height,width:r},i)}})),[e,i,l,t,d.height])}}},68667:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(14232),r=i(65231);let n=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:i}=(0,r.f)(),n=(0,a.useRef)("");return(0,a.useEffect)(()=>()=>{if(n.current){let e=n.current;n.current="",t(e,!0).then(()=>i("/",void 0,e)).catch(()=>{})}},[t,i]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let r="";try{r=await e(t,a)}catch{}r&&(i("/",r),n.current=r)},[e,i])}},74789:(e,t,i)=>{i.d(t,{Gn:()=>s,Ve:()=>d,WZ:()=>c,Xc:()=>l,r_:()=>o});var a=i(34901),r=i(16361),n=i(60109);let s=(e,t,i=[],a=0)=>{let[s]=e.split(r.QB),o=`${s}${r.QB}`,l=i.find(e=>e.startsWith(o))||"",{componentWindow:d}=t?.[l]||{},{x:c=0,y:u=0,width:h=0,height:w=0}=d?.getBoundingClientRect()||{};return!(c+a+h>(0,n.e8)()||u+a+w>(0,n.Bv)())&&(c||u)?{x:c+a,y:u+a}:void 0},o=({height:e,width:t})=>{let[i,a]=[(0,n.Bv)(),(0,n.e8)()];return{x:Math.floor(a/2-(0,n.kl)(t)/2),y:Math.floor((i-r.D5)/2-(0,n.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},d=(e,t,i=!1)=>{let{position:a,size:r}=e||{},{x:s=0,y:o=0}=a||{},{height:d=0,width:c=0}=r||{};return i?s+l.RIGHT>t.x||s+(0,n.kl)(c)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:s<0||o<0||s+(0,n.kl)(c)>t.x||o+(0,n.kl)(d)>t.y},c=(e,t)=>{let i=Number(e.height),s=Number(e.width),[o,l]=[(0,n.Bv)(),(0,n.e8)()],d=o-r.D5,c=Math.max(a.WB,Math.min(i,d)),u=Math.max(a.lH,Math.min(s,l));if(!t)return{height:c,width:u};let h=i===c,w=s===u;return h||w?h?w?{height:c,width:u}:{height:Math.round(c/(s/u)),width:u}:{height:c,width:Math.round(u/(i/c))}:i>s?{height:c,width:Math.round(u/(d/c))}:{height:Math.round(c/(l/u)),width:u}}},78011:(e,t,i)=>{i.d(t,{A:()=>f});var a=i(79052),r=i(14232),n=i(49697),s=i(84966),o=i(54188),l=i(65231),d=i(81855),c=i(55295),u=i(16361),h=i(60109),w=i(29804);let f=({callback:e,directory:t=u.Bn,id:i,onDragLeave:f,onDragOver:p,updatePositions:m})=>{let{url:b}=(0,d.N)(),g=(0,w.w)(),{iconPositions:y,sortOrders:x,setIconPositions:v}=(0,c.w)(),{exists:k,mkdirRecursive:E,updateFolder:j,writeFile:C}=(0,l.f)(),A=(0,r.useCallback)(async(e,t,r)=>{if(i)if(t){let n=(0,a.join)(u.Bn,e);if(await E(u.Bn),await C(n,t,!0))return r===o.z.UPDATE_URL&&b(i,n),j(u.Bn,e),(0,a.basename)(n)}else r===o.z.UPDATE_URL&&b(i,e);return""},[i,E,j,b,C]),{openTransferDialog:$}=(0,n.A)();return{onDragLeave:f,onDragOver:(0,r.useCallback)(e=>{p?.(e),(0,h.CH)(e)},[p]),onDrop:(0,r.useCallback)(r=>{if(u.jj.has((0,h.uQ)(t)))return;if(r.target instanceof HTMLElement){if(r.target.closest(".focus-within")?.contains(r.target))return;if(m){let{files:e,text:i}=(0,s.bn)(r);if(0===e.length&&""===i)return;(async()=>{let n={x:r.clientX,y:r.clientY},s=[];if(i){try{s=JSON.parse(i)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;s=s.map(e=>(0,a.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await (0,h.$I)(s,t,y,k),(0,h.$Y)(t,r.target,y,x,n,s,v,k)})()}}let n="string"==typeof i;n&&!m&&t===u.Bn&&g.current[i]?.componentWindow?.focus(u.VD),(0,s.nX)(r,e||A,t,$,n)},[e,t,k,y,i,$,g,v,x,m,A])}}}}]);